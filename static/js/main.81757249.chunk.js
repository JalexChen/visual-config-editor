(this["webpackJsonpvisual-config-editor"]=this["webpackJsonpvisual-config-editor"]||[]).push([[0],{81:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),o=n.n(c),i=n(5),s=n(31),l=Object(i.d)(),d=l.useStoreActions,u=(l.useStoreDispatch,l.useStoreState),m=n(1),b=function(){var e=u((function(e){return e.config})),t=u((function(e){return e.editingConfig})),n=function(e){var t=null===e||void 0===e?void 0:e.match("# SDK Version: .*\n");if(e&&t&&t.index){var n=t.index+t[0].length;return e.substring(0,n)+"# VCE Version: 0.2.0\n# Modeled with the CircleCI visual config editor.\n# For more information, see https://github.com/CircleCI-Public/visual-config-editor\n"+e.substring(n,e.length)}return e};return Object(m.jsxs)("div",{className:"bg-circle-gray-900 h-2/5 w-full flex flex-col",children:[Object(m.jsx)("div",{className:"border-b text-xl border-circle-gray-800 font-bold",children:Object(m.jsx)("div",{className:"ml-4 border-b-4 px-3 py-3 w-max text-sm tracking-wide font-bold text-white border-white",children:"CONFIG"})}),Object(m.jsx)("div",{className:"flex-1 overflow-hidden",children:t?Object(m.jsx)(s.a,{theme:"vs-dark",language:"yaml",original:e&&n(e),modified:t&&n(t)}):Object(m.jsx)(s.b,{theme:"vs-dark",language:"yaml",value:e&&n(e)})})]})},j=n(2),p=function(){var e=u((function(e){return e.navigation})),t=e.component.Component;return Object(m.jsx)("div",{className:"h-full border-l border-circle-gray-300 w-80 pt-6 bg-white flex flex-col overflow-y-hidden",children:Object(m.jsx)(t,Object(j.a)({},e.props))})},f=n(6),x=n(12),v=n(10),O=n(9),h=n(83),g=n(4),w=function(e){return Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:e.className,fill:"none",stroke:"black",children:Object(m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})})},y=function(e){return Object(m.jsxs)("div",{className:"flex flex-row",children:[Object(m.jsx)(w,{className:"ml-1 mr-2 w-5 h-5"})," ",e.data.name]})},N=n(25),C=n(7),k=["label"],S=function(e){var t=e.label,n=Object(N.a)(e,k),a=Object(C.e)(n),r=Object(f.a)(a,1)[0];return Object(m.jsxs)("div",{className:"".concat("checkbox"===n.type&&"flex flex-row"," mb-3"),children:[Object(m.jsxs)("div",{className:"flex flex-row mb-2",children:[Object(m.jsx)("p",{className:"font-bold leading-5 tracking-wide",children:t}),n.required&&Object(m.jsx)("span",{className:"ml-auto tracking-wide leading-6 text-sm text-circle-gray-400 font-medium",children:"Required"})]}),Object(m.jsx)(C.a,Object(j.a)(Object(j.a)(Object(j.a)({},r),n),{},{className:"".concat("checkbox"!==n.type?"w-full":"ml-auto"," \n             border-circle-gray-300 border-2 rounded p-1 "),children:n.children}))]})},T=n(26),E=function(e){return Object(m.jsx)("svg",{viewBox:"0 0 12 12",className:e.className,children:Object(m.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.42616 6L11.7046 10.2785C12.0985 10.6723 12.0985 11.3108 11.7046 11.7046C11.3108 12.0985 10.6723 12.0985 10.2785 11.7046L6 7.42616L1.72153 11.7046C1.3277 12.0985 0.68919 12.0985 0.295367 11.7046C-0.0984557 11.3108 -0.0984557 10.6723 0.295367 10.2785L4.57384 6L0.295367 1.72153C-0.0984557 1.3277 -0.0984557 0.68919 0.295367 0.295367C0.68919 -0.0984557 1.3277 -0.0984557 1.72153 0.295367L6 4.57384L10.2785 0.295367C10.6723 -0.0984557 11.3108 -0.0984557 11.7046 0.295367C12.0985 0.68919 12.0985 1.3277 11.7046 1.72153L7.42616 6V6Z",fill:e.color})})},P=function(e){return Object(m.jsx)("svg",{viewBox:"0 0 16 6",className:e.className,fill:e.color,children:Object(m.jsx)("path",{d:"M16 1C16 0.447715 15.5523 0 15 0H1C0.447715 0 0 0.447715 0 1C0 1.55228 0.447715 2 1 2H15C15.5523 2 16 1.55228 16 1ZM0 5C0 5.55228 0.447715 6 1 6H15C15.5523 6 16 5.55228 16 5C16 4.44772 15.5523 4 15 4H1C0.447715 4 0 4.44772 0 5Z"})})},A=function(e){return Object(m.jsx)("svg",{viewBox:"0 0 14 14",className:e.className,children:Object(m.jsx)("path",{d:e.expanded?"M4.20710678,6 L11.7928932,6 C12.0690356,6 12.2928932,6.22385763 12.2928932,6.5 C12.2928932,6.63260824 12.2402148,6.7597852 12.1464466,6.85355339 L8.35355339,10.6464466 C8.15829124,10.8417088 7.84170876,10.8417088 7.64644661,10.6464466 L3.85355339,6.85355339 C3.65829124,6.65829124 3.65829124,6.34170876 3.85355339,6.14644661 C3.94732158,6.05267842 4.07449854,6 4.20710678,6 Z":"M6,11.7928932 L6,4.20710678 C6,3.93096441 6.22385763,3.70710678 6.5,3.70710678 C6.63260824,3.70710678 6.7597852,3.7597852 6.85355339,3.85355339 L10.6464466,7.64644661 C10.8417088,7.84170876 10.8417088,8.15829124 10.6464466,8.35355339 L6.85355339,12.1464466 C6.65829124,12.3417088 6.34170876,12.3417088 6.14644661,12.1464466 C6.05267842,12.0526784 6,11.9255015 6,11.7928932 Z"})})},M=function(e){var t=Object(a.useState)(e.expanded||!1),n=Object(f.a)(t,2),r=n[0],c=n[1];return Object(m.jsxs)("div",{className:e.className,children:[Object(m.jsxs)("div",{className:"flex flex-row",children:[Object(m.jsxs)("button",{onClick:function(t){var n=!r;c(n),e.onChange&&e.onChange(n)},type:"button",className:"flex flex-row flex-1",children:[Object(m.jsx)(A,{className:"w-3 h-5 mr-3",expanded:r}),Object(m.jsx)("p",{className:"font-bold leading-5 tracking-wide",children:e.title})]}),r&&e.titleExpanded]}),r&&Object(m.jsx)("div",{className:"ml-4",children:e.children})]})},_=["label","values","description","emptyText"],L=function(e){var t=e.label,n=e.values,a=(e.description,e.emptyText),r=Object(N.a)(e,_),c=Object(C.e)(r),o=Object(f.a)(c,1)[0];return Object(m.jsx)(M,{title:t,titleExpanded:r.titleExpanded,expanded:r.expanded,children:(null===n||void 0===n?void 0:n.length)>0?Object(m.jsx)(C.b,Object(j.a)(Object(j.a)({},o),{},{name:r.name,render:function(e){return Object(m.jsx)(T.a,{onDragEnd:function(t){t.destination&&e.move(t.source.index,t.destination.index)},children:Object(m.jsx)(T.c,{droppableId:"droppable",children:function(t,a){return Object(m.jsxs)("div",Object(j.a)(Object(j.a)({},t.droppableProps),{},{ref:t.innerRef,className:"p-2 pr-0",children:[null===n||void 0===n?void 0:n.map((function(t,n){return Object(m.jsx)(T.b,{draggableId:"".concat(n),index:n,children:function(a,r){return Object(m.jsxs)("div",Object(j.a)(Object(j.a)({className:"w-full mb-2 p-1 px-3 text-sm  bg-white border border-circle-gray-300 rounded-md2 flex flex-row",ref:a.innerRef},a.draggableProps),{},{children:[Object(m.jsx)("button",{className:"flex-1 cursor-pointer text-left text-circle-black leading-6",type:"button",children:t.name}),Object(m.jsx)("div",Object(j.a)(Object(j.a)({className:"ml-auto mr-3"},a.dragHandleProps),{},{children:Object(m.jsx)(P,{className:"w-4 h-6 py-1",color:"#AAAAAA"})})),Object(m.jsx)("button",{onClick:function(){e.remove(n)},type:"button",className:"my-auto",children:Object(m.jsx)(E,{className:"w-3 h-3",color:"#AAAAAA"})})]}))}},n)})),t.placeholder]}))}})})}})):Object(m.jsx)("p",{className:"ml-2 font-medium text-sm text-circle-gray-500",children:a})})},R=function(e){return Object(m.jsx)("svg",{viewBox:"0 0 16 16",className:e.className,fill:e.color,children:Object(m.jsx)("path",{d:"M11.6568842,7.24302798 C11.9577895,7.54393324 12.0268424,7.98889307 11.864043,8.35591473 C11.8154617,8.46509554 11.746442,8.56741392 11.6568842,8.65697164 C11.6570333,8.65709247 11.6569588,8.65716701 11.6568842,8.65724154 L6.70713677,13.606989 C6.31661248,13.9975133 5.6834475,13.9975133 5.29292321,13.606989 L5.29286323,13.606929 C4.90233894,13.2164047 4.90233894,12.5832398 5.29286323,12.1927155 L9.53557889,7.94999981 L5.29286323,3.70728415 C4.90233894,3.31675986 4.90233894,2.68359488 5.29286323,2.29307059 L5.29292321,2.29301061 C5.6834475,1.90248631 6.31661248,1.90248631 6.70713677,2.29301061 L11.6568842,7.24275807 C11.6569588,7.24283261 11.6570333,7.24290715 11.6571078,7.2429817 Z"})})},V=function(){var e=u((function(e){return e.navigation})),t=d((function(e){return e.navigateBack})),n=[],a=e,r=0,c=function(){var e=r;if(r>0&&n.push(Object(m.jsx)(R,{className:"pl-1 w-5 h-5",color:"#6A6A6A"},"breadcrumb-".concat(e,"-arrow"))),n.push(Object(m.jsx)("button",{className:0===e?"font-medium text-black ml-1 cursor-default whitespace-nowrap":"text-circle-gray-500 hover:underline hover:text-black overflow-ellipsis whitespace-nowrap",onClick:function(){e>0&&t({distance:e})},children:e>1?"...":a.component.Label(a.props)},"breadcrumb-".concat(e,"-link"))),a.component.Icon){var c=a.component.Icon(a.props);c&&n.push(Object(m.jsx)("div",{children:c},"breadcrumb-".concat(e,"-icon")))}r++,a=a.from};do{c()}while(void 0!==a);return n.reverse(),Object(m.jsx)("nav",{className:"px-6",children:Object(m.jsx)("div",{className:"flex items-center",children:n.map((function(e){return e}))})})},W={run:{text:"Run a command",description:"Used for invoking all command-line programs",summary:function(e){return Object(m.jsx)("p",{className:"inline",children:e.parameters.command})},fields:Object(m.jsxs)("div",{children:[Object(m.jsx)(S,{label:"Command",as:"textarea",required:!0,name:"parameters.command"}),Object(m.jsx)(S,{label:"Shell",name:"parameters.shell"}),Object(m.jsx)(S,{label:"Background",type:"checkbox",name:"parameters.background"}),Object(m.jsx)(S,{label:"Working Directory",name:"parameters.working_directory"}),Object(m.jsx)(S,{label:"No Output Timeout",name:"parameters.no_output_timeout"}),Object(m.jsxs)(S,{label:"When",as:"select",name:"parameters.when",children:[Object(m.jsx)("option",{value:"undefined",children:"Select When"}),Object(m.jsx)("option",{value:"always",children:"Always"}),Object(m.jsx)("option",{value:"on_success",children:"On Success"}),Object(m.jsx)("option",{value:"on_fail",children:"On Fail"})]})]}),generate:function(e){return new g.commands.Run(Object(j.a)({},e.parameters))}},checkout:{text:"Checkout",description:"A special step used to check out source code to the configured path",fields:Object(m.jsx)(S,{label:"Path",name:"parameters.path"}),generate:function(e){return new g.commands.Checkout(Object(j.a)({},e.parameters))}},persist_to_workspace:{text:"Persist To Workspace",description:"Persist a temporary file to be used by another job in the workflow",fields:Object(m.jsxs)("div",{children:[Object(m.jsx)(S,{label:"Root",name:"parameters.root",required:!0}),Object(m.jsx)(S,{label:"Path",name:"parameters.path",required:!0})]}),generate:function(e){return new g.commands.workspace.Persist({root:e.parameters.root,paths:[e.parameters.path]})}},attach_workspace:{text:"Attach Workspace",description:"Attach the workflow\u2019s workspace to the current container",fields:Object(m.jsx)(S,{label:"At",name:"parameters.at",required:!0}),generate:function(e){return new g.commands.workspace.Attach(Object(j.a)({},e.parameters))}},store_artifacts:{text:"Store Artifacts",description:"Step to store artifacts such as logs and binaries",fields:Object(m.jsxs)("div",{children:["Path",Object(m.jsx)(C.a,{required:!0,name:"parameters.path",className:"p-1 w-full border-circle-light-blue border-2 rounded"}),Object(m.jsx)("br",{}),"Destination",Object(m.jsx)(C.a,{name:"parameters.destination",className:"p-1 w-full border-circle-gray-300 border-2 rounded"})]}),generate:function(e){return new g.commands.StoreArtifacts(Object(j.a)({},e.parameters))}},store_test_results:{text:"Store Test Results",description:"Upload and store test results for a build",fields:Object(m.jsx)(S,{label:"Path",name:"parameters.path",required:!0}),generate:function(e){return new g.commands.StoreTestResults(Object(j.a)({},e.parameters))}},save_cache:{text:"Save Cache",description:"Generates and stores a cache of a file or directory in object storage",fields:Object(m.jsxs)("div",{children:[Object(m.jsx)(S,{label:"Path",name:"parameters.path",required:!0}),Object(m.jsx)(S,{label:"Key",name:"parameters.key",required:!0}),Object(m.jsxs)(S,{label:"When",name:"parameters.when",as:"select",children:[Object(m.jsx)("option",{value:"undefined",children:"Select When"}),Object(m.jsx)("option",{value:"always",children:"Always"}),Object(m.jsx)("option",{value:"on_success",children:"On Success"}),Object(m.jsx)("option",{value:"on_fail",children:"On Fail"})]})]}),generate:function(e){return new g.commands.cache.Save({paths:[e.parameters.path],key:e.parameters.key,when:e.parameters.when})}}},q=function(e){var t=Object(a.useState)(e.activeTab||0),n=Object(f.a)(t,2),r=n[0],c=n[1];return Object(m.jsxs)("div",{className:"h-full",children:[Object(m.jsx)("div",{className:"flex border-b border-circle-gray-300 pl-6",children:e.tabs.map((function(e,t){return Object(m.jsx)("button",{type:"button",className:"text-sm tracking-wide px-3 py-3 font-bold text-center ".concat(t===r?"border-black border-b-4 text-circle-black":"text-circle-gray-600 mb-1"),onClick:function(){return c(t)},children:e},t)}))}),Array.isArray(e.children)?e.children[r]:e.children]})},I=function(e){var t=d((function(e){return e.navigateBack})),n="string"===typeof e.subtype,a=n?W[e.subtype]:void 0,r=n?void 0:e.subtype;return Object(m.jsxs)("div",{className:"h-full flex flex-col",children:[Object(m.jsxs)("header",{children:[Object(m.jsx)(V,{}),Object(m.jsx)("h1",{className:"ml-6 text-2xl py-2 font-bold",children:"New Step"})]}),Object(m.jsx)(C.d,{initialValues:{parameters:{}},enableReinitialize:!0,onSubmit:function(n){t({distance:1,apply:function(t){return t.steps=[].concat(Object(v.a)(t.steps),[a?a.generate(n):new g.commands.reusable.ReusableCommand(e.subtype,t.parameters)]),t}})},children:function(t){return Object(m.jsxs)(C.c,{className:"flex flex-col flex-1",children:[Object(m.jsx)(q,{tabs:["PROPERTIES"],children:Object(m.jsxs)("div",{className:"p-6",children:[Object(m.jsxs)("button",{className:"p-4 mb-4 w-full border-circle-gray-300 border-2 rounded text-left",type:"button",onClick:function(){e.selectSubtype()},children:[Object(m.jsx)("p",{className:"font-bold",children:a?null===a||void 0===a?void 0:a.text:null===r||void 0===r?void 0:r.name}),Object(m.jsx)("p",{className:"text-sm mt-1 leading-4 text-circle-gray-500",children:a?null===a||void 0===a?void 0:a.description:null===r||void 0===r?void 0:r.description})]}),a?null===a||void 0===a?void 0:a.fields:"custom fields"]})}),Object(m.jsx)("span",{className:"border-b border-circle-gray-300 mt-auto"}),Object(m.jsx)("button",{type:"submit",className:"text-white text-sm font-medium p-2 m-6 bg-circle-blue duration:50 transition-all rounded-md2",children:"Save Step"})]})}})]})},B={Component:function(e){var t=u((function(e){return e.definitions}));return Object(m.jsxs)("div",{children:[Object(m.jsxs)("header",{children:[Object(m.jsx)(V,{}),Object(m.jsx)("h1",{className:"ml-6 text-2xl py-3 font-bold",children:"Step Type"})]}),Object(m.jsxs)(q,{tabs:["BUILT-IN","COMMANDS","ORBS"],children:[Object(m.jsx)("div",{className:"p-6",children:Object.keys(W).map((function(t){return Object(m.jsxs)("button",{type:"button",className:"p-4 mb-4 w-full border-circle-gray-300 border-2 rounded text-left",onClick:function(){e.setSubtype(t)},children:[Object(m.jsx)("p",{className:"font-bold",children:W[t].text}),Object(m.jsx)("p",{className:"text-sm mt-1 leading-4 text-circle-gray-500",children:W[t].description})]},t)}))}),Object(m.jsx)("div",{className:"p-6",children:t.commands.map((function(t){return Object(m.jsxs)("button",{type:"button",className:"p-4 mb-4 w-full border-circle-gray-300 border-2 rounded text-left",onClick:function(){e.setSubtype(t)},children:[Object(m.jsx)("p",{className:"font-bold",children:t.name}),Object(m.jsx)("p",{className:"text-sm mt-1 leading-4 text-circle-gray-500",children:"Command description will show here"})]},t.name)}))}),Object(m.jsx)("div",{children:"User defined commands will show here"}),Object(m.jsx)("div",{children:"Predefined orb steps will show here"})]})]})},Label:function(){return Object(m.jsx)("p",{children:"New Step"})}},D={Component:function(e){var t=Object(a.useState)(),n=Object(f.a)(t,2),r=n[0],c=n[1],o=e.typePage.Component,i=e.menuPage;return Object(m.jsx)("div",{className:"h-full flex flex-col",children:(null===r||void 0===r?void 0:r.current)?Object(m.jsx)(i,Object(j.a)({subtype:r.current,selectSubtype:function(){c({current:void 0,previous:null===r||void 0===r?void 0:r.current})}},e.menuProps)):Object(m.jsx)(o,Object(j.a)(Object(j.a)({},e.typeProps),{},{setSubtype:function(e){c({current:e,previous:null===r||void 0===r?void 0:r.current})}}))})},Label:function(e){return e.typePage.Label(e)},Icon:function(e){return e.typePage.Icon?e.typePage.Icon(e):null}},H=function(e){var t=d((function(e){return e.navigateTo}));return Object(m.jsxs)("div",{children:[Object(m.jsx)(S,{name:"name",label:"Name",required:!0,value:e.values.name}),Object(m.jsx)(S,{name:"description",label:"Description",as:"textarea"}),Object(m.jsx)(L,{label:"Steps",name:"steps",values:e.values.steps,expanded:!0,required:!0,emptyText:"No steps defined yet. At least one step is required.",titleExpanded:Object(m.jsx)("button",{type:"button",onClick:function(){t({component:D,props:{typePage:B,menuPage:I,passThrough:{dataType:F}},values:e.values})},className:"ml-auto tracking-wide hover:underline leading-6 text-sm text-circle-blue font-medium",children:"New"})})]})},Z={string:{text:"String",description:"Pass text data",fields:Object(m.jsx)(S,{name:"defaultValue",as:"textarea",label:"Default Value"})},boolean:{text:"Boolean",fields:Object(m.jsxs)(S,{name:"defaultValue",as:"select",label:"Default Value",children:[Object(m.jsx)("option",{value:"undefined",children:"No default"}),Object(m.jsx)("option",{value:"false",children:"false"}),Object(m.jsx)("option",{value:"true",children:"true"})]})},integer:{text:"Integer",fields:Object(m.jsx)(S,{name:"defaultValue",as:"number",label:"Default Value"})},enum:{text:"Enum",fields:Object(m.jsx)("input",{type:"text"})},executor:{text:"Executor",fields:function(e){var t;return Object(m.jsx)(S,{label:"Executor",as:"select",name:"executor.name",required:!0,children:null===(t=e.executors)||void 0===t?void 0:t.map((function(e){return Object(m.jsx)("option",{value:e.name,children:e.name},e.name)}))})}},steps:{text:"Steps",fields:Object(m.jsx)("input",{type:"text"})},env_var_name:{text:"Environment Variable Name",fields:Object(m.jsx)("input",{type:"text"})}},J={pipeline:{types:["string","boolean","integer","enum"]},executor:{types:["string","boolean","integer","enum"]},job:{types:["string","boolean","integer","enum","executor","steps","env_var_name"]},command:{types:["string","boolean","integer","enum","steps","env_var_name"]}},F={type:"commands",name:{singular:"Command",plural:"Commands"},defaults:{name:"new-command",steps:[]},parameters:J.command,transform:function(e){return new g.commands.reusable.CustomCommand(e.name,e.steps,e.parameters)},store:{get:function(e){return e.definitions.commands},add:function(e){return e.defineCommand},update:function(e){return e.updateCommand},remove:function(e){return e.undefineCommand}},components:{icon:w,summary:y,inspector:H}},z=function(e){return Object(m.jsx)("svg",{viewBox:"0 0 96 96",className:e.className,children:Object(m.jsxs)("g",{id:"Layer_1","data-name":"Layer 1",children:[Object(m.jsx)("path",{d:"M85.93,30h-76a6,6,0,0,1-6-6V12a6,6,0,0,1,6-6h76a6,6,0,0,1,6,6V24A6,6,0,0,1,85.93,30Zm-76-20a2,2,0,0,0-2,2V24a2,2,0,0,0,2,2h76a2,2,0,0,0,2-2V12a2,2,0,0,0-2-2Z"}),Object(m.jsx)("path",{d:"M85.93,90h-76a6,6,0,0,1-6-6V72a6,6,0,0,1,6-6h76a6,6,0,0,1,6,6V84A6,6,0,0,1,85.93,90Zm-76-20a2,2,0,0,0-2,2V84a2,2,0,0,0,2,2h76a2,2,0,0,0,2-2V72a2,2,0,0,0-2-2Z"}),Object(m.jsx)("path",{d:"M85.93,60h-76a6,6,0,0,1-6-6V42a6,6,0,0,1,6-6h76a6,6,0,0,1,6,6V54A6,6,0,0,1,85.93,60Zm-76-20a2,2,0,0,0-2,2V54a2,2,0,0,0,2,2h76a2,2,0,0,0,2-2V42a2,2,0,0,0-2-2Z"}),Object(m.jsx)("circle",{cx:"19.93",cy:"18",r:"4"}),Object(m.jsx)("circle",{cx:"19.93",cy:"48",r:"4"}),Object(m.jsx)("circle",{cx:"19.93",cy:"78",r:"4"}),Object(m.jsx)("path",{d:"M77.93,20h-48a2,2,0,0,1,0-4h48a2,2,0,0,1,0,4Z"}),Object(m.jsx)("path",{d:"M77.93,50h-48a2,2,0,0,1,0-4h48a2,2,0,0,1,0,4Z"}),Object(m.jsx)("path",{d:"M77.93,80h-48a2,2,0,0,1,0-4h48a2,2,0,0,1,0,4Z"})]})})},X=function(e){return Object(m.jsxs)("div",{className:"flex flex-row",children:[Object(m.jsx)(z,{className:"ml-1 mr-2 w-5 h-5"})," ",e.data.name]})},Y={docker:{text:"Docker",resourceClasses:["small","medium","medium+","large","xlarge","2xlarge","2xlarge+"],fields:Object(m.jsx)(S,{label:"Image",name:"executor.image.image",required:!0}),description:"Steps run in container with provided image"},machine:{text:"Machine",resourceClasses:["medium","large","xlarge","2xlarge"],fields:Object(m.jsx)(S,{label:"Image",name:"executor.image",required:!0}),description:"Steps run on Linux Virtual Machine"},macos:{text:"MacOS",resourceClasses:["medium","large"],fields:Object(m.jsx)(S,{label:"Xcode",name:"executor.xcode",required:!0}),description:"Steps run on macOS Virtual Machine with specific Xcode version"},windows:{text:"Windows",resourceClasses:["medium","large","xlarge","2xlarge"],fields:Object(m.jsx)(S,{label:"Image",name:"executor.image",required:!0}),description:"Steps run on Windows Virtual Machine"}},K=function(e){var t,n,a;return Object(m.jsxs)("div",{children:[Object(m.jsx)(S,{label:"Name",name:"name",required:!0}),Object(m.jsx)(S,{label:"Description",name:"executor.parameters.description",as:"textarea"}),Object(m.jsx)(S,{label:"Resource Class",name:"resource_class",required:!0,as:"select",children:null===(t=Y[e.values.type])||void 0===t||null===(n=t.resourceClasses)||void 0===n?void 0:n.map((function(e){return Object(m.jsx)("option",{value:e,children:e},e)}))}),null===(a=Y[e.values.type])||void 0===a?void 0:a.fields,Object(m.jsx)(S,{label:"Shell",name:"executor.parameters.shell"}),Object(m.jsx)(S,{label:"Working Directory",name:"executor.parameters.working_directory"})]})},U={Component:function(e){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("header",{children:[Object(m.jsx)(V,{}),Object(m.jsxs)("div",{className:"ml-6 flex py-3",children:[Object(m.jsx)(z,{className:"w-8 h-8 p-1 pl-0 mr-1"}),Object(m.jsx)("h1",{className:"text-2xl font-bold",children:"New Executor"})]}),Object(m.jsx)("div",{className:"flex border-b border-circle-gray-300 pl-6",children:Object(m.jsx)("div",{className:"text-sm tracking-wide px-3 py-3 font-bold text-center 'border-black border-b-4 border-black text-circle-black",children:"TYPE"})})]}),Object(m.jsx)("div",{className:"p-6",children:Object.keys(Y).map((function(t){return Object(m.jsxs)("button",{type:"button",className:"p-4 mb-4 w-full border-circle-gray-300 border-2 rounded text-left",onClick:function(){e.setSubtype(t)},children:[Object(m.jsx)("p",{className:"font-bold",children:Y[t].text}),Object(m.jsx)("p",{className:"text-sm mt-1 leading-4 text-circle-gray-500",children:Y[t].description})]},t)}))})]})},Label:function(e){return Object(m.jsx)("p",{children:"New Executor"})},Icon:function(e){return Object(m.jsx)(z,{className:"w-6 h-8 py-2"})}},G=function(e){return Object(m.jsx)("svg",{viewBox:"0 0 24 24",className:e.className,children:Object(m.jsx)("path",{d:"M12.458388,3 C17.7284428,3 22,7.25487688 22,12.5009275 C22,17.7469783 17.7286827,22 12.458388,22 C9.24779218,22 6.40748266,20.4195905 4.67890641,17.9975161 L4.51046025,18 C5.52650577,18 6.4784703,17.7267799 7.29630887,17.2500927 C8.5797622,18.6332003 10.4175246,19.5 12.4581919,19.5 C16.3422622,19.5 19.4895397,16.3667214 19.4895397,12.5010252 C19.4895397,8.63532901 16.3417423,5.5 12.4581919,5.5 C10.4182181,5.5 8.58077831,6.36686635 7.29682565,7.75083018 C6.52574446,7.30040157 5.63375878,7.03136434 4.68109466,7.00257493 C6.40892952,4.58026814 9.24869152,3 12.458388,3 Z M12.4596333,9.00000001 C14.4011972,9.00000001 15.9748954,10.5675188 15.9748954,12.5003076 C15.9748954,14.4330964 14.4012513,16 12.4596333,16 C11.2973265,16 10.266758,15.437833 9.62706371,14.5716975 C9.88962048,13.931837 10.0334728,13.2326478 10.0334728,12.5 C10.0334728,11.767055 9.88950371,11.0675956 9.62819064,10.4281361 C10.2669454,9.56228031 11.2974499,9.00000001 12.4596333,9.00000001 Z M4.50987191,10 C5.89718507,10 7.0209205,11.1200937 7.0209205,12.5002929 C7.0209205,13.8804921 5.89718507,15 4.50987191,15 C3.12373543,15 2,13.8804921 2,12.5002929 C2,11.1200937 3.12373543,10 4.50987191,10 Z"})})},Q=function(e){return Object(m.jsx)("svg",{viewBox:"0 0 ".concat(e.filled?"20 20":"16 16"),className:e.className,children:e.filled?Object(m.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 9V6C11 5.44772 10.5523 5 10 5C9.44771 5 9 5.44772 9 6V9H6C5.44772 9 5 9.44771 5 10C5 10.5523 5.44772 11 6 11H9V14C9 14.5523 9.44771 15 10 15C10.5523 15 11 14.5523 11 14V11H14C14.5523 11 15 10.5523 15 10C15 9.44771 14.5523 9 14 9H11ZM10 0C15.52 0 20 4.48 20 10C20 15.52 15.52 20 10 20C4.48 20 0 15.52 0 10C0 4.48 4.48 0 10 0Z",fill:e.color}):Object(m.jsxs)("g",{children:[Object(m.jsx)("mask",{id:"mask0_266_8047",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"16",height:"16",children:Object(m.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.66764 7.33357V5.33357C8.66764 4.96538 8.36916 4.66691 8.00097 4.66691C7.63278 4.66691 7.33431 4.96538 7.33431 5.33357V7.33357H5.33431C4.96612 7.33357 4.66764 7.63205 4.66764 8.00024C4.66764 8.36843 4.96612 8.66691 5.33431 8.66691H7.33431V10.6669C7.33431 11.0351 7.63278 11.3336 8.00097 11.3336C8.36916 11.3336 8.66764 11.0351 8.66764 10.6669V8.66691H10.6676C11.0358 8.66691 11.3343 8.36843 11.3343 8.00024C11.3343 7.63205 11.0358 7.33357 10.6676 7.33357H8.66764ZM8.00065 1.8335C4.59679 1.8335 1.83398 4.59631 1.83398 8.00016C1.83398 11.404 4.59679 14.1668 8.00065 14.1668C11.4045 14.1668 14.1673 11.404 14.1673 8.00016C14.1673 4.59631 11.4045 1.8335 8.00065 1.8335ZM0.833984 8.00016C0.833984 4.04402 4.04451 0.833496 8.00065 0.833496C11.9568 0.833496 15.1673 4.04402 15.1673 8.00016C15.1673 11.9563 11.9568 15.1668 8.00065 15.1668C4.04451 15.1668 0.833984 11.9563 0.833984 8.00016Z",fill:"white"})}),Object(m.jsx)("g",{mask:"url(#mask0_266_8047)",children:Object(m.jsx)("rect",{width:"16",height:"16",fill:e.color})})]})})},$=function(e){return Object(m.jsx)("svg",{viewBox:"0 0 24 24",className:e.className,fill:e.color,children:Object(m.jsx)("path",{d:"M13,12.0005 L13,14.5005 C13,15.8812153 14.1192847,17.0005 15.5,17.0005 C16.7716732,17.0005 17.8215783,16.0510253 17.9794794,14.8223119 C16.8252603,14.4045443 16,13.2985065 16,12.0005 C16,10.3434832 17.3434471,9.0005 19,9.0005 C20.6565529,9.0005 22,10.3434832 22,12.0005 C22,13.3107265 21.1591278,14.4253528 19.9878345,14.8339277 C19.8172144,17.1635097 17.8731367,19.0005 15.5,19.0005 C13.0147153,19.0005 11,16.9857847 11,14.5005 L11,12.0005 L11,9.4995 C11,8.11906389 9.88099443,7.0005 8.5,7.0005 C7.2278041,7.0005 6.17794274,7.94975945 6.020417,9.17853139 C7.17480406,9.5960731 8,10.7018409 8,12.0005 C8,13.6567847 6.65628475,15.0005 5,15.0005 C3.34371525,15.0005 2,13.6567847 2,12.0005 C2,10.6896797 2.84072326,9.57538027 4.01209968,9.16698275 C4.18228055,6.83714058 6.12646259,5.0005 8.5,5.0005 C10.9853872,5.0005 13,7.0143176 13,9.4995 L13,12.0005 Z M6,12.0005 C6,11.4482074 5.55213797,11.0005 5,11.0005 C4.44786203,11.0005 4,11.4482074 4,12.0005 C4,12.5522153 4.44828475,13.0005 5,13.0005 C5.55171525,13.0005 6,12.5522153 6,12.0005 Z M20,12.0005 C20,11.4482074 19.552138,11.0005 19,11.0005 C18.447862,11.0005 18,11.4482074 18,12.0005 C18,12.5522153 18.4482847,13.0005 19,13.0005 C19.5517153,13.0005 20,12.5522153 20,12.0005 Z"})})},ee={type:"jobs",name:{singular:"Job",plural:"Jobs"},defaults:{name:"New Job",steps:[]},parameters:J.job,transform:function(e,t){var n=t.executors.find((function(t){var n;return t.name===(null===(n=e.executor)||void 0===n?void 0:n.name)}));if(n)return new g.Job(e.name,n,e.steps)},store:{get:function(e){return e.definitions.jobs},add:function(e){return e.defineJob},update:function(e){return e.updateJob},remove:function(e){return e.undefineJob}},dragTarget:"workflow",node:{transform:function(e,t){return new g.WorkflowJob(e,t)},component:function(e){var t,n=u((function(e){return e.workflows[e.selectedWorkflow].elements})),c=u((function(e){return e.dragging})),o=d((function(e){return e.updateJob})),i=d((function(e){return e.setConnecting})),s=u((function(e){return e.connecting})),l=d((function(e){return e.updateConnecting})),b=r.a.useState({handles:!1,node:!1,requiredBy:!1,remove:!1,requires:!1}),p=Object(f.a)(b,2),v=p[0],h=p[1],g=function(e,t,n,a){return{onMouseEnter:function(){h(e.reduce((function(e,t){return Object(j.a)(Object(j.a)({},e),{},Object(x.a)({},t,!0))}),v)),n&&n()},onMouseLeave:function(){h(t.reduce((function(e,t){return Object(j.a)(Object(j.a)({},e),{},Object(x.a)({},t,!1))}),v)),a&&a()}}},w=Object(a.useRef)(null);return Object(m.jsxs)("div",Object(j.a)(Object(j.a)({className:"p-8 flex flex-row cursor-default"},g(["handles"],["handles","node","requires","requiredBy"],(function(){var t;l({ref:w,id:{connectionNodeId:e.id,connectionHandleType:"target",connectionHandleId:"".concat(e.id,"_target")},name:(null===(t=e.data.parameters)||void 0===t?void 0:t.name)||e.data.job.name})}),(function(){l(void 0)}))),{},{onDragOver:function(e){var t;c&&(null===(t=c.dataType)||void 0===t?void 0:t.dragTarget)===ee.type&&e.preventDefault()},onDrop:function(t){var a;if(c&&(null===(a=c.dataType)||void 0===a?void 0:a.dragTarget)===ee.type&&c.dataType.applyToNode){var r=c.dataType.applyToNode(c.data,e.data);ee.type in r&&o({old:e.data.job,new:r.job}),"parameters"in r&&function(e,t){n.map((function(n){return Object(O.h)(n)&&n.data.job.name===e.job.name?Object(j.a)(Object(j.a)({},n),{},{data:Object(j.a)(Object(j.a)({},e),t)}):n}))}(e.data,r)}},children:[Object(m.jsx)("button",Object(j.a)(Object(j.a)({className:"opacity-".concat(!v.handles||v.node||(null===s||void 0===s?void 0:s.start)?0:100," transition-opacity duration-300 w-4 h-4 my-auto mr-5"),id:"".concat(e.id,"_source")},g(["requires","handles"],["requires"])),{},{children:Object(m.jsx)(Q,{filled:v.requires,color:"rgb(0, 120, 202)",className:"bg-white rounded-full w-full border border-white"})})),Object(m.jsxs)("button",Object(j.a)(Object(j.a)({className:"p-2 bg-white node flex flex-row text-black rounded-md border cursor-pointer \n        ".concat(v.node&&!v.remove||v.handles&&(null===s||void 0===s?void 0:s.start)?"border-circle-blue":"border-circle-gray-300"),ref:w},g(["node"],["node"])),{},{children:[Object(m.jsxs)("div",{className:"flex w-full",children:[Object(m.jsx)(G,{className:"w-5 mr-2"}),(null===(t=e.data.parameters)||void 0===t?void 0:t.name)||e.data.job.name]}),Object(m.jsx)("div",Object(j.a)(Object(j.a)({className:"my-auto\n          opacity-".concat(v.node?100:0," \n          transition-opacity duration-150 w-8 h-full flex")},g(["remove"],["remove"])),{},{children:Object(m.jsx)(E,{className:"w-3 cursor-pointer m-auto",color:v.remove?"red":"#AAAAAA"})}))]})),Object(m.jsx)("button",Object(j.a)(Object(j.a)({className:"opacity-".concat(!v.handles||v.node||(null===s||void 0===s?void 0:s.start)?0:100," source transition-opacity duration-300 w-4 h-4 my-auto ml-5")},g(["requiredBy","handles"],["requiredBy"])),{},{id:"".concat(e.id,"_target"),draggable:!0,onDragStart:function(t){var n;i({ref:w,id:{connectionNodeId:e.id,connectionHandleType:"source",connectionHandleId:"".concat(e.id,"_source")},name:(null===(n=e.data.parameters)||void 0===n?void 0:n.name)||e.data.job.name}),t.preventDefault()},children:Object(m.jsx)(Q,{className:"bg-white rounded-full w-full border border-white",color:"rgb(0, 120, 202)",filled:v.requiredBy})})),Object(m.jsx)(O.d,{type:"source",className:"opacity-0",position:O.e.Right,id:"".concat(e.id,"_source")}),Object(m.jsx)(O.d,{className:"opacity-0",id:"".concat(e.id,"_target"),type:"target",position:O.e.Left})]}))}},components:{icon:G,summary:function(e){return Object(m.jsxs)("div",{className:"flex flex-row",children:[Object(m.jsx)(G,{className:"ml-1 mr-2 w-5 h-5"}),Object(m.jsx)("p",{className:"leading-5",children:e.data.name}),Object(m.jsx)($,{className:"w-5 h-5 ml-auto",color:"#E3E3E3"})]})},inspector:function(e){var t=d((function(e){return e.navigateTo}));return Object(m.jsxs)("div",{children:[Object(m.jsx)(S,{label:"Name",name:"name",required:!0}),Object(m.jsx)(S,{label:"Executor",as:"select",name:"executor.name",required:!0,children:[{name:"Select Executor"}].concat(Object(v.a)(e.definitions.executors)).map((function(e){return Object(m.jsx)("option",{value:e.name,children:e.name},e.name)}))}),Object(m.jsx)(L,{label:"Steps",name:"steps",values:e.values.steps,expanded:!0,emptyText:"No steps defined yet.",titleExpanded:Object(m.jsx)("button",{type:"button",onClick:function(){t({component:D,props:{typePage:B,menuPage:I,passThrough:{dataType:ee}},values:e.values})},className:"ml-auto tracking-wide hover:underline leading-6 text-sm text-circle-blue font-medium",children:"New"})})]})}}},te={type:"executors",name:{singular:"Executor",plural:"Executors"},defaults:{docker:{name:"docker",executor:{image:{image:"cimg/base:stable"},parameters:{}},resource_class:"medium"},machine:{name:"machine",executor:{image:"ubuntu-2004:202111-01",parameters:{}},resource_class:"medium"},macos:{name:"macos",executor:{xcode:"13.2.0",parameters:{}},resource_class:"medium"},windows:{name:"windows_server",executor:{image:"windows-server-2019-vs2019:stable",parameters:{}},resource_class:"medium"}},parameters:J.executor,transform:function(e){var t={docker:function(){return new g.executor.DockerExecutor(e.executor.image.image||"cimg/base:stable",e.executor.resource_class,e.executor.parameters)},machine:function(){return new g.executor.MachineExecutor(e.executor.resource_class,e.executor.image||"cimg/base:latest",e.executor.parameters)},macos:function(){return new g.executor.MacOSExecutor(e.executor.xcode,e.executor.resource_class,e.executor.parameters)},windows:function(){return new g.executor.WindowsExecutor(e.executor.image,e.executor.resource_class,e.executor.parameters)}};return new g.executor.ReusableExecutor(e.name,t[e.type]())},store:{get:function(e){return e.definitions.executors},add:function(e){return e.defineExecutor},update:function(e){return e.updateExecutor},remove:function(e){return e.undefineExecutor}},dragTarget:ee.type,applyToNode:function(e,t){var n=t.job;return new g.WorkflowJob(new g.Job(n.name,e,n.steps),t.parameters)},subtypes:{component:U,definitions:Y},components:{icon:z,summary:X,inspector:K}},ne=function(e){return Object(m.jsx)("svg",{viewBox:"0 0 18 18",className:e.className,children:Object(m.jsx)("path",{fillRule:"evenodd",d:"M4.649 3.084A1 1 0 015.163 4.4 13.95 13.95 0 004 10c0 1.993.416 3.886 1.164 5.6a1 1 0 01-1.832.8A15.95 15.95 0 012 10c0-2.274.475-4.44 1.332-6.4a1 1 0 011.317-.516zM12.96 7a3 3 0 00-2.342 1.126l-.328.41-.111-.279A2 2 0 008.323 7H8a1 1 0 000 2h.323l.532 1.33-1.035 1.295a1 1 0 01-.781.375H7a1 1 0 100 2h.039a3 3 0 002.342-1.126l.328-.41.111.279A2 2 0 0011.677 14H12a1 1 0 100-2h-.323l-.532-1.33 1.035-1.295A1 1 0 0112.961 9H13a1 1 0 100-2h-.039zm1.874-2.6a1 1 0 011.833-.8A15.95 15.95 0 0118 10c0 2.274-.475 4.44-1.332 6.4a1 1 0 11-1.832-.8A13.949 13.949 0 0016 10c0-1.993-.416-3.886-1.165-5.6z",clipRule:"evenodd"})})},ae={type:"parameters",name:{singular:"Parameter",plural:"Parameters"},defaults:{integer:{name:"new_integer_parameter"},boolean:{name:"new_boolean_parameter"},string:{name:"new_string_parameter"},enum:{name:"new_enum_parameter"}},transform:function(e){return new g.parameters.CustomParameter(e.name,e.type,e.defaultValue,e.description)},store:{get:function(e){return e.definitions.parameters},add:function(e){return e.defineParameter},update:function(e){return e.updateParameter},remove:function(e){return e.undefineParameter}},subtypes:{component:{Component:function(e){var t,n=(null===(t=e.component)||void 0===t?void 0:t.parameters)||J.pipeline;return Object(m.jsxs)("div",{children:[Object(m.jsxs)("header",{children:[Object(m.jsx)(V,{}),Object(m.jsxs)("div",{className:"ml-6 flex py-3",children:[Object(m.jsx)(ne,{className:"w-8 h-8 p-1 pl-0 mr-1"}),Object(m.jsx)("h1",{className:"text-2xl font-bold",children:"New Parameter"})]}),Object(m.jsx)("div",{className:"flex border-b border-circle-gray-300 pl-6",children:Object(m.jsx)("div",{className:"text-sm tracking-wide px-3 py-3 font-bold text-center 'border-black border-b-4 border-black text-circle-black",children:"TYPE"})})]}),Object(m.jsx)("div",{className:"p-6",children:(null===n||void 0===n?void 0:n.types)&&n.types.map((function(t){var n,a;return Object(m.jsxs)("button",{type:"button",className:"p-4 mb-4 w-full border-circle-gray-300 border-2 rounded text-left",onClick:function(){e.setSubtype(t)},children:[console.log(Z[t],t),Object(m.jsx)("p",{className:"font-bold",children:null===(n=Z[t])||void 0===n?void 0:n.text}),Object(m.jsx)("p",{className:"text-sm mt-1 leading-4 text-circle-gray-500",children:null===(a=Z[t])||void 0===a?void 0:a.description})]},t)}))})]})},Label:function(e){return Object(m.jsx)("p",{children:"New Parameter"})},Icon:function(e){return Object(m.jsx)(ne,{className:"w-6 h-8 py-2"})}},definitions:Z},components:{icon:ne,summary:function(e){return Object(m.jsxs)("div",{className:"flex flex-row",children:[Object(m.jsx)(ne,{className:"ml-1 mr-2 w-5 h-5"})," ",e.data.name]})},inspector:function(e){var t;return Object(m.jsxs)("div",{children:[Object(m.jsx)(S,{name:"name",label:"Name",required:!0}),Object(m.jsx)(S,{name:"description",label:"Description"}),null===(t=Z[e.values.type])||void 0===t?void 0:t.fields]})}}},re=[{type:"executors",component:[g.executor.DockerExecutor,g.executor.MacOSExecutor,g.executor.MachineExecutor,g.executor.WindowsExecutor],mapping:te},{type:"jobs",component:[g.Job],mapping:ee},{type:"commands",component:[g.commands.reusable.CustomCommand],mapping:F},{type:"parameters",component:[g.parameters.CustomParameter],mapping:ae}],ce=function(e){e.sourceX,e.sourceY,e.sourcePosition;var t,n,a,r=e.targetX,c=e.targetY,o=(e.targetPosition,e.connectionLineType,e.connectionLineStyle,u((function(e){return e.connecting}))),i=Object(O.j)((function(e){return e.transform})),s=null===o||void 0===o||null===(t=o.start)||void 0===t||null===(n=t.ref)||void 0===n?void 0:n.current;if(!s)return null;var l=s.getBoundingClientRect(),d=(l.x+l.width-i[0])/i[2],b=(l.y+l.height/2-64-i[1])/i[2],j=r,p=c,f=30,x=j-f<d+f,v="#76CDFF";if(!x&&(null===o||void 0===o||null===(a=o.end)||void 0===a?void 0:a.ref)){var h,g,w=null===o||void 0===o||null===(h=o.end.ref)||void 0===h?void 0:h.current;if(w&&(null===o||void 0===o||null===(g=o.end)||void 0===g?void 0:g.ref.current)!==s){var y=w.getBoundingClientRect();j=(y.x-i[0])/i[2],p=(y.y+y.height/2-64-i[1])/i[2],v="#0078CA"}}return v=x?"#F24646":v,Object(m.jsxs)("g",{children:[Object(m.jsx)("path",{fill:"none",stroke:v,strokeWidth:1.5,className:"animated",d:"M".concat(d,",").concat(b," ").concat(d+f,",").concat(b," ").concat(d+f,",").concat(b," ").concat(j-f,",").concat(p," ").concat(j-f,",").concat(p," ").concat(j,",").concat(p)}),Object(m.jsx)("circle",{cx:j,cy:p,fill:"#fff",r:3,stroke:v,strokeWidth:1.5}),Object(m.jsx)("circle",{cx:d-2,cy:b,fill:"#fff",r:3,stroke:v,strokeWidth:1.5})]})};function oe(e){var t=e.id,n=e.sourceX,a=e.sourceY,r=e.targetX,c=e.targetY,o=(e.sourcePosition,e.targetPosition,e.style),i=void 0===o?{}:o,s=(e.data,e.arrowHeadType,e.markerEndId,45);return Object(m.jsx)("g",{children:Object(m.jsx)("path",{id:t,style:i,className:"react-flow__edge-path",d:"M".concat(n-90,",").concat(a," ").concat(n-s,",").concat(a," ").concat(n-s,",").concat(a," ").concat(r+s,",").concat(c," ").concat(r+s,",").concat(c," ").concat(r+90,",").concat(c)})})}var ie=function(e){var t=Object(a.useState)({x:0,y:0,zoom:1}),n=Object(f.a)(t,2),r=n[0],c=n[1],o=u((function(e){return e.workflows[e.selectedWorkflow].elements})),i=d((function(e){return e.addWorkflowElement})),s=u((function(e){return e.dragging})),l=u((function(e){return e.connecting})),b=d((function(e){return e.setWorkflowElements})),p=d((function(e){return e.setConnecting})),g=Object(a.useState)({x:0,y:0}),w=Object(f.a)(g,2),y=w[0],N=w[1],C=function(){var e,t,n;if(null===l||void 0===l||null===(e=l.start)||void 0===e?void 0:e.name){var a,r=l.start.name;(null===l||void 0===l||null===(a=l.end)||void 0===a?void 0:a.name)&&b(Object(O.f)({source:l.start.id.connectionNodeId,target:l.end.id.connectionNodeId,type:"requires",sourceHandle:l.start.id.connectionHandleId,targetHandle:l.end.id.connectionNodeId,animated:!1,style:{stroke:"#A3A3A3",strokeWidth:"2px"}},(t=l.end.name,n=function(e){return{requires:(null===e||void 0===e?void 0:e.requires)?[].concat(Object(v.a)(e.requires),[r]):[r]}},o.map((function(e){var a,r,c;return console.log(((null===(a=e.data.parameters)||void 0===a?void 0:a.name)||e.data.job.name)===t),Object(O.h)(e)&&(null===(r=ee.node)||void 0===r?void 0:r.transform)&&((null===(c=e.data.parameters)||void 0===c?void 0:c.name)||e.data.job.name)===t?Object(j.a)(Object(j.a)({},e),{},{data:ee.node.transform(e.data.job,n(e.data.parameters))}):e}))))),p({id:{connectionNodeId:null,connectionHandleType:null,connectionHandleId:null}})}};Object(a.useEffect)((function(){return window.addEventListener("mouseup",C),function(){window.removeEventListener("mouseup",C)}}));var k=function(){var e=Object(O.i)((function(e){return e.setConnectionNodeId})),t=Object(O.i)((function(e){return e.setConnectionPosition}));return Object(a.useEffect)((function(){var n;e(null===l||void 0===l||null===(n=l.start)||void 0===n?void 0:n.id),t({x:y.x-r.x,y:y.y-r.y})})),null};return Object(m.jsx)("div",{className:"w-full h-full",onDragOver:function(e){var t;"workflow"===(null===s||void 0===s||null===(t=s.dataType)||void 0===t?void 0:t.dragTarget)&&e.preventDefault()},onDrag:function(e){},onMouseMove:function(e){var t,n=null===(t=e.target.closest(".react-flow"))||void 0===t?void 0:t.getBoundingClientRect();n&&N({x:e.clientX+r.x-n.left,y:e.clientY+r.y-n.top})},onDrop:function(e){var t,n,a=null===s||void 0===s||null===(t=s.dataType)||void 0===t?void 0:t.node;if("workflow"===(null===s||void 0===s||null===(n=s.dataType)||void 0===n?void 0:n.dragTarget)&&a){var c={x:e.clientX-15-r.x,y:e.clientY-45-r.y},o=function(e){return 15*Math.floor(e/r.zoom/15)},l=s.data;a.transform&&(l=a.transform(l));var d={id:Object(h.a)(),data:l,connectable:!0,dragHandle:".node",type:s.dataType.type,position:{x:o(c.x),y:o(c.y)}};i(d)}},children:Object(m.jsxs)(O.g,{elements:o,className:e.className,onMove:function(e){c(e||r)},selectNodesOnDrag:!1,nodeTypes:Object.assign.apply(Object,[{}].concat(Object(v.a)(re.map((function(e){return e.mapping.node?Object(x.a)({},e.mapping.type,e.mapping.node.component):null}))))),edgeTypes:{requires:oe},snapToGrid:!0,connectionMode:O.c.Loose,connectionLineComponent:ce,children:[Object(m.jsx)(k,{}),Object(m.jsx)(O.a,{variant:O.b.Dots,gap:15,color:"#A3A3A3",className:e.bgClassName,size:1})]})})},se=function(){var e=u((function(e){return e.workflows})),t=u((function(e){return e.selectedWorkflow})),n=d((function(e){return e.selectWorkflow}));return Object(m.jsxs)("div",{className:"flex flex-col flex-nowrap flex-1",children:[Object(m.jsx)("div",{className:"w-full bg-white h-16 p-5",children:Object(m.jsx)("select",{className:"rounded border border-circle-gray-400 p-2",children:e.map((function(e,t){return Object(m.jsx)("option",{value:e.id,onChange:function(){return n(t)},children:e.name},e.id)}))})}),Object(m.jsx)(ie,{workflow:e[t],bgClassName:"bg-circle-gray-200",className:"border border-r-0 h-full border-b-0 border-circle-gray-300"})]})},le={Component:function(e){var t=e.dataType,n=d((function(e){return(null===t||void 0===t?void 0:t.store.update(e))||e.error})),a=d((function(e){return e.navigateBack})),r=u((function(e){return e.definitions})),c=function(e){var n=null===t||void 0===t?void 0:t.components.icon;if(n){var a=n;return Object(m.jsx)(a,{className:e})}};return Object(m.jsxs)("div",{className:"h-full flex flex-col",children:[Object(m.jsxs)("header",{className:"ml-6",children:[Object(m.jsxs)("div",{className:"flex items-center",children:[Object(m.jsx)("button",{className:"text-base text-circle-gray-500",onClick:function(){a()},children:"Definitions"}),Object(m.jsx)(R,{className:"pl-1 w-5 h-5",color:"#6A6A6A"}),c("w-6 h-8 py-2"),Object(m.jsxs)("p",{className:"ml-1 font-medium leading-6 tracking-tight",children:["Edit ",null===t||void 0===t?void 0:t.name.singular]})]}),Object(m.jsxs)("div",{className:"py-3 flex",children:[c("w-8 h-8 p-1 pl-0 mr-1"),Object(m.jsx)("h1",{className:"text-2xl font-bold",children:e.data.name})]})]}),t&&Object(m.jsx)(C.d,{initialValues:e.values||Object(j.a)(Object(j.a)({},t.defaults),e.data),enableReinitialize:!0,onSubmit:function(c){n({old:e.data,new:t.transform(c,r)}),a()},children:function(e){return Object(m.jsxs)(C.c,{className:"flex flex-col flex-1",children:[Object(m.jsxs)(q,{tabs:["PROPERTIES","PARAMETERS"],children:[Object(m.jsx)("div",{className:"p-6",children:t.components.inspector(Object(j.a)(Object(j.a)({},e),{},{definitions:r}))}),Object(m.jsx)("div",{children:"parameters will go here!"})]}),Object(m.jsx)("span",{className:"border border-circle-gray-300 mt-auto"}),Object(m.jsxs)("button",{type:"submit",className:"text-white text-sm font-medium p-2 m-6 bg-circle-blue duration:50 transition-all rounded-md2",children:["Save ",null===t||void 0===t?void 0:t.name.singular]})]})}})]})},Label:function(e){var t;return Object(m.jsxs)("p",{children:["Edit ",null===(t=e.dataType)||void 0===t?void 0:t.name.singular]})}},de=function(e){var t=e.type.components.summary,n=d((function(e){return e.navigateTo})),a=d((function(e){return e.setDragging}));return Object(m.jsx)("button",{className:"w-full mb-2 p-2 text-sm cursor-pointer text-left text-circle-black  bg-white border border-circle-gray-300 rounded-md2",draggable:"true",onDragStart:function(t){var n=e.type;(null===n||void 0===n?void 0:n.dragTarget)&&a({dataType:n,data:e.data})},onClick:function(t){n({component:le,props:{data:e.data,dataType:e.type}})},children:Object(m.jsx)(t,{data:e.data})})},ue=function(e){var t=Object(C.e)(e.values.parameters),n=Object(f.a)(t,1)[0],a=d((function(e){return e.navigateTo}));return Object(m.jsx)(C.b,Object(j.a)(Object(j.a)({},n),{},{name:"parameters",render:function(t){var n;return Object(m.jsxs)("div",{className:"p-6 flex flex-col",children:[Object(m.jsx)("button",{type:"button",onClick:function(){var t;a({component:D,props:{typePage:null===(t=ae.subtypes)||void 0===t?void 0:t.component,typeProps:{component:e.dataMapping},menuPage:me,menuProps:{dataType:ae,passBackKey:"parameters"}},values:Object(j.a)({},e.values)})},className:"m-auto tracking-wide hover:underline leading-6 text-sm text-circle-blue font-medium mb-4",children:"Add Parameter"}),null===(n=e.values.parameters)||void 0===n?void 0:n.map((function(e){return Object(m.jsxs)("div",{className:"p-4 mb-4 w-full border-circle-gray-300 border-2 rounded text-left",children:[Object(m.jsx)("div",{className:"flex",children:Object(m.jsx)("p",{className:"font-bold",children:e.name})}),e.description&&Object(m.jsx)("p",{className:"text-sm mt-1 leading-4 whitespace-pre-wrap text-circle-gray-500",children:e.description}),e.defaultValue?Object(m.jsx)("p",{className:"text-sm mt-1 leading-4 whitespace-pre-wrap text-circle-gray-500",children:e.description}):Object(m.jsx)("p",{className:"text-sm mt-1 leading-4 whitespace-pre-wrap text-circle-gray-500",children:"Required"})]},e.name)}))]})}}))},me=function(e){var t=u((function(e){return e.definitions})),n=d((function(e){return e.generateConfig})),a=d((function(e){return e.navigateBack})),r=e.dataType,c=d((function(e){return(null===r||void 0===r?void 0:r.store.add(e))||e.error})),o=["PROPERTIES"];return(null===r||void 0===r?void 0:r.parameters)&&o.push("PARAMETERS"),Object(m.jsxs)("div",{className:"h-full flex flex-col",children:[Object(m.jsxs)("header",{children:[Object(m.jsx)(V,{}),Object(m.jsxs)("div",{className:"ml-6 py-3 flex",children:[function(e){var t=null===r||void 0===r?void 0:r.components.icon;if(t){var n=t;return Object(m.jsx)(n,{className:e})}}("w-8 h-8 p-1 pl-0 mr-1"),Object(m.jsxs)("h1",{className:"text-2xl font-bold",children:["New ",null===r||void 0===r?void 0:r.name.singular]})]})]}),r&&Object(m.jsx)(C.d,{initialValues:Object(j.a)({type:e.subtype},e.values||(e.subtype?r.defaults[e.subtype]:r.defaults)),validateOnBlur:!0,validate:function(e){var a=r.transform(e,t);a&&n(Object(x.a)({},r.type,[a]))},enableReinitialize:!0,onSubmit:function(o){var i=r.transform(o,t);e.passBackKey||c(i),a({distance:1,apply:function(t){return e.passBackKey&&(t[e.passBackKey]=[].concat(Object(v.a)(t[e.passBackKey]||[]),[i])),t}}),n()},children:function(n){var a,c,i;return Object(m.jsxs)(C.c,{className:"flex flex-col flex-1",children:[Object(m.jsxs)(q,{tabs:o,activeTab:(null===(a=e.values)||void 0===a?void 0:a.activeTab)||0,children:[Object(m.jsxs)("div",{className:"p-6",children:[r.subtypes&&Object(m.jsxs)("button",{className:"p-4 mb-4 w-full border-circle-gray-300 border-2 rounded text-left",type:"button",onClick:function(){e.selectSubtype()},children:[Object(m.jsx)("p",{className:"font-bold",children:null===(c=r.subtypes.definitions[e.subtype])||void 0===c?void 0:c.text}),Object(m.jsx)("p",{className:"text-sm mt-1 leading-4 text-circle-gray-500",children:null===(i=r.subtypes.definitions[e.subtype])||void 0===i?void 0:i.description})]}),r.components.inspector(Object(j.a)(Object(j.a)({},n),{},{definitions:t,subtype:e.subtype}))]}),r.parameters?Object(m.jsx)(ue,{dataMapping:r,values:n.values}):null]}),Object(m.jsx)("span",{className:"border-b border-circle-gray-300 mt-auto"}),Object(m.jsxs)("button",{type:"submit",className:"text-white text-sm font-medium p-2 m-6 bg-circle-blue duration:50 transition-all rounded-md2",children:["Save ",null===r||void 0===r?void 0:r.name.singular]})]})}})]})},be={Component:me,Label:function(e){var t;return Object(m.jsxs)("p",{children:["New ",null===(t=e.dataType)||void 0===t?void 0:t.name.singular]})},Icon:function(e){var t,n=null===(t=e.dataType)||void 0===t?void 0:t.components.icon;if(!n)return null;var a=n;return Object(m.jsx)(a,{className:"w-6 h-8 py-2"})}},je=function(e){var t=u(e.type.store.get),n=d((function(e){return e.navigateTo}));return Object(m.jsxs)("div",{className:"w-full p-4 pb-0",children:[Object(m.jsx)(M,{title:e.type.name.plural,expanded:e.expanded,onChange:e.onChange,titleExpanded:Object(m.jsx)("button",{onClick:function(){var t,a;return n((null===(t=e.type.subtypes)||void 0===t?void 0:t.component)?{component:D,props:{typePage:null===(a=e.type.subtypes)||void 0===a?void 0:a.component,menuPage:me,menuProps:{dataType:e.type}}}:{component:be,props:{dataType:e.type}})},className:"ml-auto tracking-wide hover:underline leading-6 text-sm text-circle-blue font-medium",children:"New"}),children:Object(m.jsx)("div",{className:"w-full pl-2 pt-2",children:(t||[]).length>0?null===t||void 0===t?void 0:t.map((function(t){return Object(m.jsx)(de,{data:t,type:e.type},t.name)})):Object(m.jsxs)("div",{className:"font-medium text-sm text-circle-gray-500",children:["No ",e.type.name.plural," found."]})})}),Object(m.jsx)("div",{className:"w-full p-2 border-b border-circle-gray-300"})]})},pe={Component:function(e){var t=u((function(e){return e.workflows})),n=u((function(e){return e.selectedWorkflow})),a=d((function(e){return e.generateConfig})),r=d((function(e){return e.persistProps})),c=t[n];return Object(m.jsxs)("div",{className:"h-full bg-white flex flex-col overflow-y-auto",children:[Object(m.jsxs)("header",{className:"ml-4 mb-4 flex",children:[Object(m.jsx)($,{className:"w-8 h-8 p-1 mr-1"}),Object(m.jsx)("h1",{className:"text-2xl font-bold",children:c.name})]}),Object(m.jsxs)(q,{tabs:["DEFINITIONS","PROPERTIES"],children:[Object(m.jsx)("div",{className:"p-2 flex-1 h-full w-full flex-col",children:re.map((function(t,n){var a=t.mapping;return Object(m.jsx)(je,{type:a,expanded:e.expanded[n],onChange:function(t){r(Object(j.a)(Object(j.a)({},e),{},{expanded:e.expanded.map((function(e,a){return a===n?t:e}))}))}},a.name.plural)}))}),Object(m.jsx)("div",{className:"p-6",children:Object(m.jsx)(C.d,{initialValues:{name:c.name},enableReinitialize:!0,onSubmit:function(e){},children:function(e){return Object(m.jsx)(C.c,{className:"flex flex-col flex-1",children:Object(m.jsx)(S,{label:"Name",name:"name"})})}})})]}),Object(m.jsx)("span",{className:"border-b border-circle-gray-300"}),Object(m.jsx)("button",{className:"text-white text-sm font-medium p-2 m-6 bg-circle-blue duration:50 transition-all rounded-md2",onClick:function(e){return a()},children:"Generate Config"})]})},Label:function(e){return Object(m.jsx)("p",{children:"Definitions"})}},fe={persistProps:Object(i.b)((function(e,t){e.navigation=Object(j.a)(Object(j.a)({},e.navigation),{},{props:t})})),setConnecting:Object(i.b)((function(e,t){t.ref?e.connecting={start:t}:e.connecting=void 0})),updateConnecting:Object(i.b)((function(e,t){var n;(null===(n=e.connecting)||void 0===n?void 0:n.start)&&(e.connecting={start:e.connecting.start,end:t})})),setPlaceholder:Object(i.b)((function(e,t){var n=e.workflows[e.selectedWorkflow];e.placeholder?e.workflows[e.selectedWorkflow]=Object(j.a)(Object(j.a)({},n),{},{elements:n.elements.map((function(n){var a;return n.id===(null===(a=e.placeholder)||void 0===a?void 0:a.id)?t:n}))}):n.elements.push(t),e.placeholder={index:n.elements.length-1,id:n.id}})),navigateTo:Object(i.b)((function(e,t){var n=e.navigation;n.jumpedFrom&&(e.navigation.jumpedFrom=void 0),e.navigation=Object(j.a)(Object(j.a)({},t),{},{from:Object(j.a)(Object(j.a)({},n),{},{props:Object(j.a)(Object(j.a)({},n.props),{},{values:t.values})})})})),navigateBack:Object(i.b)((function(e,t){var n=(null===t||void 0===t?void 0:t.distance)||1;if(e.navigation.from){for(var a,r=e.navigation,c=0;c<n;c++){if(!r.from)throw new Error("Tried to navigate back to an undefined component!");r=r.from}e.navigation=Object(j.a)(Object(j.a)({},r),{},{props:Object(j.a)(Object(j.a)({},r.props),{},{values:(null===t||void 0===t||null===(a=t.apply)||void 0===a?void 0:a.call(t,r.props.values))||r.props.values}),jumpedFrom:n>1?e.navigation:void 0})}else e.navigation={component:pe,props:{}}})),setDragging:Object(i.b)((function(e,t){e.dragging=t})),addWorkflow:Object(i.b)((function(e,t){e.workflows=e.workflows.concat({name:t,id:Object(h.a)(),elements:[]})})),selectWorkflow:Object(i.b)((function(e,t){e.selectedWorkflow=t})),removeWorkflow:Object(i.b)((function(e,t){e.workflows=e.workflows.filter((function(e){return e.id!==t.id}))})),addWorkflowElement:Object(i.b)((function(e,t){e.workflows[e.selectedWorkflow].elements.push(t)})),removeWorkflowElement:Object(i.b)((function(e,t){})),setWorkflowElements:Object(i.b)((function(e,t){e.workflows[e.selectedWorkflow].elements=t})),defineJob:Object(i.b)((function(e,t){var n;null===(n=e.definitions.jobs)||void 0===n||n.push(t)})),updateJob:Object(i.b)((function(e,t){if(e.definitions.jobs){var n=e.workflows[e.selectedWorkflow];n.elements=n.elements.map((function(e){return Object(O.h)(e)&&"job"===e.type&&e.data.job.name===t.old.name?Object(j.a)(Object(j.a)({},e),{},{data:Object(j.a)(Object(j.a)({},e.data),{},{job:t.new})}):e})),e.definitions.jobs=e.definitions.jobs.map((function(e){return e.name===t.old.name?t.new:e}))}})),undefineJob:Object(i.b)((function(e,t){var n;e.definitions.jobs=null===(n=e.definitions.jobs)||void 0===n?void 0:n.filter((function(e){return e.name===t.name}))})),defineExecutor:Object(i.b)((function(e,t){var n;e.definitions.executors=null===(n=e.definitions.executors)||void 0===n?void 0:n.concat(t)})),updateExecutor:Object(i.b)((function(e,t){e.definitions.executors})),undefineExecutor:Object(i.b)((function(e,t){var n;null===(n=e.definitions.executors)||void 0===n||n.filter((function(e){return e.name!==t.name}))})),defineParameter:Object(i.b)((function(e,t){var n;e.definitions.parameters=null===(n=e.definitions.parameters)||void 0===n?void 0:n.concat(t)})),updateParameter:Object(i.b)((function(e,t){})),undefineParameter:Object(i.b)((function(e,t){var n;null===(n=e.definitions.parameters)||void 0===n||n.filter((function(e){return e.name!==t.name}))})),defineCommand:Object(i.b)((function(e,t){var n;e.definitions.commands=null===(n=e.definitions.commands)||void 0===n?void 0:n.concat(t)})),updateCommand:Object(i.b)((function(e,t){})),undefineCommand:Object(i.b)((function(e,t){var n;null===(n=e.definitions.commands)||void 0===n||n.filter((function(e){return e.name!==t.name}))})),error:Object(i.b)((function(e,t){console.error("An action was not found! ",t)})),generateConfig:Object(i.b)((function(e,t){var n=e.workflows.map((function(e){var t=e.elements.filter((function(e){return e.type===ee.type})).map((function(e){return e.data}));return new g.Workflow(e.name,t)})),a=e.definitions,r=new g.Config(!1,(null===t||void 0===t?void 0:t.jobs)?[].concat(Object(v.a)(a.jobs),Object(v.a)(t.jobs)):a.jobs,n,(null===t||void 0===t?void 0:t.executors)?[].concat(Object(v.a)(a.executors),Object(v.a)(t.executors)):a.executors,(null===t||void 0===t?void 0:t.commands)?[].concat(Object(v.a)(a.commands),Object(v.a)(t.commands)):a.commands,a.parameters.length>0?new g.parameters.CustomParametersList((null===t||void 0===t?void 0:t.parameters)?[].concat(Object(v.a)(a.parameters),Object(v.a)(t.parameters)):a.parameters):void 0);t?e.editingConfig=r.stringify():(e.config=r.stringify(),e.editingConfig=void 0)}))},xe=Object(j.a)({selectedWorkflow:0,editingConfig:void 0,config:void 0,navigation:{component:pe,props:{expanded:[!0,!0,!1,!1]}},definitions:{commands:[],executors:[],jobs:[],workflows:[],parameters:[]},workflows:[{name:"build-and-test",elements:[],id:Object(h.a)()}]},fe),ve=function(){return Object(m.jsx)(i.a,{store:Object(i.c)(xe),children:Object(m.jsxs)("section",{className:"flex flex-row h-full",children:[Object(m.jsxs)("section",{className:"flex flex-col flex-nowrap flex-1",children:[Object(m.jsx)(se,{}),Object(m.jsx)(b,{})]}),Object(m.jsx)(p,{})]})})};n(81);o.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(ve,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.81757249.chunk.js.map